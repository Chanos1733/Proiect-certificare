<!DOCTYPE html>
<html lang="en" style="height: auto;">
<head>

    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title>Admin</title>
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <!-- CHANOS ART icon -->
    <link href="/Doar-flori-pagina-sus.png" rel="icon" type="image/x-icon">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- pentru font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link href="/css/gradient buttons .css" rel="stylesheet" type="text/css">
    <link href="/css/parti componente header.css" rel="stylesheet" type="text/css">

    <link href="/css/mdb.min.css" rel="stylesheet" type="text/css">
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <link href="/css/CSS trebuie LOGIN.css" rel="stylesheet" type="text/css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .magictime {
            -webkit-animation-duration: 2s;
            animation-duration: 2s;
        }






    </style>

    <script>
        function deleteProduct(productId) {
            //1. apelam server-ul
            $.post("http://localhost:8083/admin/remove-product?id=" + productId);

            //2. trebuie sa stergem produsul din interfata = DOM numai daca pasul 1 a fost ok
            // var el = document.getElementById(productId);
            // el.parentElement.parentElement.remove();
            $("#" + productId).parent().parent().remove();
            $("#result-message").html("Produsul a fost sters cu succes");
            $("#result-message").removeClass("magictime puffOut");
            $("#result-message").show();
            setTimeout(deleteResultMessage, 2000);
        }

        function deleteResultMessage() {
            $("#result-message").addClass("magictime puffOut");
        }

        function toggleFormAdd() {
            $("#form-add").toggle();
        }

        function sendSaveProductRequest() {
            var nameProduct = $("#nameProduct").val();
            var descriptionProduct = $("#descriptionProduct").val();
            var priceProduct = $("#priceProduct").val();

            var url = "http://localhost:8083/admin/save-product?name=" + nameProduct + "&description=" + descriptionProduct + "&price=" + priceProduct;

            //Folosesc AJAX ca sa comunic cu serverul
            $.post(url, function (data) {
                $("#result-message").html(data);
                $("#result-message").removeClass("magictime puffOut");
                $("#result-message").show();
                setTimeout(deleteResultMessage, 2000);
                $("#form-add").toggle();
            });
        }

        function nextPage() {
            $.get("http://localhost:8083/admin/products-paginated?pageNumber=2", function (data) {
                for (var i = 0; i < data.length; i++) {
                    alert(data[i].name);
                }
            });
        }






    </script>
</head>
<body style="font-family: 'Patrick Hand', cursive;  background-image: linear-gradient(#d55548 25%, #49ab6b 100%); background-repeat: no-repeat;background-attachment: fixed;">


<div class="nav ">
    <div style="height: 10%;">
        <div class="topnav fixed-top">
            <a href="/dashboard" class="active">Acasă</a>
            <img class="mr-sm-4" src="/img/Imagini/Doar-flori.png" style="padding-left: 5px; padding-top: 2px; ">
        </div>
    </div>
</div>
<div style="padding-top: 56px; ">

    <div style="width: 100% !important;">
        <div class="shop-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center" style="max-width: 700px;">
            <h1 class="display-4">Administrare produse</h1>
        </div>

        <div class="container" style="max-width: 960px;">

            <div class="alert alert-primary" role="alert" id="result-message" style="display: none">

            </div>

            <button type="button" class="btn btn-info" onclick="toggleFormAdd();">Adauga produs</button>

            <form id="form-add" style="display: none">
                <div class="form-group">
                    <label for="nameProduct">Nume</label>
                    <input type="text" class="form-control" id="nameProduct">
                </div>

                <div class="form-group">
                    <label for="priceProduct">Pret</label>
                    <input type="text" class="form-control" id="priceProduct">
                </div>

                <div class="form-group">
                    <label for="materialsProduct">Materiale</label>
                    <input type="text" class="form-control" id="materialsProduct">
                </div>

                <div class="form-group">
                    <label for="dimensionsProduct">Dimensiuni</label>
                    <input type="text" class="form-control" id="dimensionsProduct">
                </div>

                <div class="form-group">
                    <label for="colorProduct">Culoare</label>
                    <input type="text" class="form-control" id="colorProduct">
                </div>

                <div class="form-group">
                    <label for="descriptionProduct">Descriere</label>
                    <input type="text" class="form-control" id="descriptionProduct">
                </div>

                <div class="form-group">
                    <label for="photo1Product">Poza 1</label>
                    <input type="text" class="form-control" id="photo1Product">
                </div>

                <div class="form-group">
                    <label for="photo2Product">Poza 2</label>
                    <input type="text" class="form-control" id="photo2Product">
                </div>

                <div class="form-group">
                    <label for="photo3Product">Poza 3</label>
                    <input type="text" class="form-control" id="photo3Product">
                </div>


                <button type="button" class="btn btn-info" onclick="sendSaveProductRequest();">Salveaza</button>
            </form>

            <table class="table table-bordered table-dark" width=90%>
                <thead>
                <tr class="bg-danger">
                    <th scope="col">Id</th>
                    <th scope="col">Nume</th>
                    <th scope="col">Pret</th>
                    <th scope="col">Dimensiuni</th>
                    <th scope="col">Descriere</th>
                    <th scope="col">Nume fisier poza 1</th>
                    <th scope="col">Nume fisier poza 2</th>
                    <th scope="col">Nume fisier poza 3</th>
                    <th scope="col">Detalii</th>
                    <th scope="col">Editare</th>
                    <th scope="col">Stergere</th>

                </tr>
                </thead>
                <tbody>

                <tr th:each="p : ${products}">
                    <td th:text="${p.id}"></td>
                    <td th:text="${p.name}"></td>
                    <td th:text="${p.price}"></td>
                    <td th:text="${p.dimensions}"></td>
                    <td th:text="${p.description}"></td>
                    <td th:text="${p.photo1}"></td>
                    <td th:text="${p.photo2}"></td>
                    <td th:text="${p.photo3}"></td>
                    <td>
                        <button type="button" class="btn btn-outline-primary">Detalii</button>
                    </td>
                    <td>
                        <button type="button" class="btn btn-outline-warning">Editare</button>
                    </td>
                    <td>
                        <button type="submit" th:id="${p.id}" onclick="deleteProduct(this.id);"
                                class="btn btn btn-danger"
                                style="width: fit-content;">
                            Stergere
                        </button>
                    </td>
                </tr>

                </tbody>
            </table>

            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item"><a class="page-link" onclick="prevPage();">Previous</a></li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" onclick="nextPage();">Next</a></li>
                </ul>
            </nav>

        </div>
    </div>
    <div class="bottomside">
        <h4 style="padding-left: 45%; padding-top: 20px;">© Chanos Art 2020 </h4>
    </div>
</div>

</body>
</html>